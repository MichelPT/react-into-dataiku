"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[483],{3483:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var r=t(5155),l=t(2115),s=t(5695),n=t(2577),d=t(1154),i=t(9509);let o=()=>{let e=e=>({default:e}),a={TRIM_MODE:"AUTO",DEPTH_ABOVE:"",DEPTH_BELOW:""};return[{id:1,location:"Parameter",mode:"Input",comment:"Trim mode",unit:"MODE",name:"TRIM_MODE",isEnabled:!0},{id:2,location:"Parameter",mode:"Input",comment:"Trim above this depth",unit:"m",name:"DEPTH_ABOVE",isEnabled:!0},{id:3,location:"Parameter",mode:"Input",comment:"Trim below this depth",unit:"m",name:"DEPTH_BELOW",isEnabled:!0}].map(t=>({...t,values:e(a[t.name]||"")}))};function c(){let{selectedIntervals:e,selectedWells:a}=(0,n.M)(),t=(0,s.useRouter)(),[c,m]=(0,l.useState)([]),[u,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{m(o())},[]);let h=(e,a)=>{m(t=>t.map(t=>t.id===e?{...t,values:{default:a}}:t))},x=async e=>{e.preventDefault(),b(!0);let r=c.filter(e=>e.isEnabled).reduce((e,a)=>(e[a.name]=a.values.default,e),{}),l=i.env.NEXT_PUBLIC_API_URL;try{let e=await fetch("".concat(l,"/api/trim-data"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:r,selected_wells:a})});if(!e.ok){let a=await e.json();throw Error(a.error||"Server error")}let s=await e.json();alert(s.message||"Data berhasil di-trim."),t.push("/dashboard")}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{b(!1)}},p=(e,a)=>{switch(e){case"Parameter":return"bg-orange-600";case"Constant":if("Input"===a)return"bg-yellow-300";return"bg-yellow-100";case"Log":if("Input"===a)return"bg-cyan-400";return"bg-cyan-200";case"Output":return"bg-yellow-600";case"Interval":return"bg-green-400";default:return"bg-white"}},g=(e,a)=>"AUTO"===a||"TRIM_ABOVE"===a&&"DEPTH_ABOVE"===e||"TRIM_BELLOW"===a&&"DEPTH_BELOW"===e,f=c.find(e=>"TRIM_MODE"===e.name),E=(null==f?void 0:f.values.default)||"DEPTH_BELOW";return(0,r.jsxs)("div",{className:"p-4 md:p-6 h-full flex flex-col bg-white rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800 flex-shrink-0",children:"Trim Well Log Data"}),(0,r.jsxs)("form",{onSubmit:x,className:"flex-grow flex flex-col min-h-0",children:[(0,r.jsxs)("div",{className:"flex-shrink-0 mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col gap-4",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Well: ",a.join(", ")||"N/A"," / Intervals: ",e.length," selected"]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[(0,r.jsx)("button",{type:"button",className:"px-6 py-2 rounded-md text-gray-800 bg-gray-200 hover:bg-gray-300 font-semibold",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 rounded-md text-white font-semibold bg-blue-600 hover:bg-blue-700",disabled:u,children:u?(0,r.jsx)(d.A,{className:"animate-spin"}):"Start"})]})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 flex-shrink-0",children:"Parameters"}),(0,r.jsx)("div",{className:"flex-grow min-h-0 border border-gray-300 rounded-lg",children:(0,r.jsx)("div",{className:"overflow-auto h-full",children:(0,r.jsxs)("table",{className:"min-w-full text-sm table-auto",children:[(0,r.jsx)("thead",{className:"bg-gray-200 sticky top-0 z-10",children:(0,r.jsxs)("tr",{children:[["#","Location","Mode","Comment","Unit","Name"].map(e=>(0,r.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-b border-r border-gray-300 whitespace-nowrap",children:e},e)),(0,r.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-b border-r border-gray-300 whitespace-nowrap",children:"Value"})]})}),(0,r.jsx)("tbody",{className:"bg-white",children:c.map(e=>{var a,t,l;let s=null==(a=c.find(e=>"TRIM_MODE"===e.name))?void 0:a.values.default;return("DEPTH_ABOVE"!==e.name||"DEPTH_ABOVE"!==s&&"CUSTOM_TRIM"!==s)&&("DEPTH_BELOW"!==e.name||"DEPTH_BELOW"!==s&&"CUSTOM_TRIM"!==s)&&["DEPTH_ABOVE","DEPTH_BELOW"].includes(e.name)?null:(0,r.jsxs)("tr",{className:"border-b border-gray-200 text-white ".concat(e.isEnabled?p(e.location,e.mode):"bg-gray-100 text-gray-400"),children:[(0,r.jsx)("td",{className:"px-3 py-2 border-r text-center",children:e.id}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap",children:e.location}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap",children:e.mode}),(0,r.jsx)("td",{className:"px-3 py-2 border-r max-w-xs whitespace-normal",children:e.comment}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap",children:e.unit}),(0,r.jsx)("td",{className:"px-3 py-2 border-r font-semibold whitespace-nowrap",children:e.name}),(0,r.jsx)("td",{className:"px-3 py-2 border-r bg-white text-black",children:"TRIM_MODE"===e.name?(0,r.jsxs)("select",{value:String(null!=(t=e.values.default)?t:""),onChange:a=>h(e.id,a.target.value),disabled:!e.isEnabled,className:"w-full min-w-[100px] p-1 bg-white text-black disabled:bg-gray-100 disabled:text-gray-500",children:[(0,r.jsx)("option",{value:"",children:"Choose Method"}),(0,r.jsx)("option",{value:"DEPTH_BELOW",children:"DEPTH_BELOW"}),(0,r.jsx)("option",{value:"DEPTH_ABOVE",children:"DEPTH_ABOVE"}),(0,r.jsx)("option",{value:"CUSTOM_TRIM",children:"CUSTOM_TRIM"})]}):(0,r.jsx)("input",{type:"text",value:null!=(l=e.values.default)?l:"",onChange:a=>h(e.id,a.target.value),disabled:g(e.name,String(E)),className:"w-full min-w-[100px] p-1 bg-white text-black disabled:bg-gray-100 disabled:text-gray-500"})})]},e.id)})})]})})})]})]})}}}]);