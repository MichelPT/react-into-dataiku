"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[577],{255:(e,t,r)=>{function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),r(5155),r(7650),r(5744),r(589)},1154:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2146:(e,t,r)=>{function a(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),r(5262)},2577:(e,t,r)=>{r.d(t,{M:()=>i,q:()=>s});var a=r(5155),o=r(2115),l=r(9509);let n=(0,o.createContext)(void 0),s=e=>{let{children:t}=e,[r,s]=(0,o.useState)([]),[i,c]=(0,o.useState)([]),[u,d]=(0,o.useState)([]),[f,p]=(0,o.useState)([]),[g,h]=(0,o.useState)("default"),[y,m]=(0,o.useState)({}),[b,w]=(0,o.useState)({data:[],layout:{}}),[v,k]=(0,o.useState)(null),[_,j]=(0,o.useState)(!0),[A,S]=(0,o.useState)(null),P=l.env.NEXT_PUBLIC_API_URL;(0,o.useEffect)(()=>{let e=l.env.NEXT_PUBLIC_API_URL;(async()=>{try{if(!e)throw Error("API URL is not configured.");let t="".concat(e,"/api/list-wells");console.log("Fetching available wells from server: ".concat(t));let r=await fetch(t);if(!r.ok)throw Error("Network response from /api/list-wells was not ok");let a=await r.json();Array.isArray(a)&&s(a)}catch(e){console.error("Failed to fetch well list from server:",e)}try{let e=await fetch("http://127.0.0.1:5001/api/list-intervals");if(!e.ok)throw Error("Gagal mengambil daftar interval");let t=await e.json();Array.isArray(t)&&c(t)}catch(e){console.error("Error fetching intervals:",e)}})()},[]),(0,o.useCallback)(async()=>{if(0===u.length||!P){w({data:[],layout:{title:{text:"Please select a well to begin."}}}),j(!1);return}j(!0),S(null);try{let e=await fetch("".concat(P,"/api/get-plot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selected_wells:u,selected_intervals:f})});if(!e.ok){let t=await e.json();throw Error(t.error||"Network response was not ok")}let t=await e.json();w(t)}catch(e){console.error("Failed to fetch plot data:",e),S(e instanceof Error?e.message:"An unknown error occurred"),w({data:[],layout:{}})}finally{j(!1)}},[u,f,P]);let x=async e=>{try{let t=await fetch("".concat(P,"/api/get-well-columns"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wells:e})});if(!t.ok)throw Error("Network error saat ambil kolom well");let r=await t.json();m(r)}catch(e){console.error("Gagal mengambil kolom well:",e)}};(0,o.useEffect)(()=>{u.length>0&&x(u)},[u]);let N={availableWells:r,selectedWells:u,toggleWellSelection:e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},selectedIntervals:f,toggleInterval:e=>{p(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},plotType:g,setPlotType:h,wellColumns:y,fetchWellColumns:x,plotFigure:b,setPlotFigure:w,selectedFilePath:v,setSelectedFilePath:k,isLoading:_,error:A,getCurrentLogs:()=>{console.log("Getting current logs from plot data:",b.data);let e=b.data.filter(e=>"scattergl"===e.type&&e.name&&!e.name.toLowerCase().includes("xover")&&"MARKER"!==e.name);console.log("Found log curves:",e.map(e=>e.name));let t=[];for(let r of e)if(r.name)try{let e=[],a=[];if(r.x&&r.x._inputArray instanceof Float64Array?e=Array.from(r.x._inputArray):Array.isArray(r.x)?e=r.x:r.x&&Array.isArray(r.x.data)&&(e=r.x.data),r.y&&r.y._inputArray instanceof Float64Array?a=Array.from(r.y._inputArray):Array.isArray(r.y)?a=r.y:r.y&&Array.isArray(r.y.data)&&(a=r.y.data),0===e.length||0===a.length){console.log("No valid data arrays for log ".concat(r.name));continue}let o=[];for(let t=0;t<a.length;t++){let r=Number(a[t]),l=e[t],n=null!=l?Number(l):null;isNaN(r)||null!==n&&isNaN(n)||o.push([r,n])}if(0===o.length){console.log("No valid data points found for log ".concat(r.name));continue}console.log("Processed ".concat(o.length," points for log ").concat(r.name)),t.push({curveName:r.name,data:o,wellName:u[0]||"Unknown Well",plotData:b.data})}catch(e){console.error("Error processing log ".concat(r.name,": ").concat(e))}return console.log("Transformed logs:",t),t},availableIntervals:i,plotData:b.data,setPlotData:e=>w(t=>({...t,data:e}))};return(0,a.jsx)(n.Provider,{value:N,children:t})},i=()=>{let e=(0,o.useContext)(n);if(void 0===e)throw Error("useDashboard must be used within a DashboardProvider");return e}},4054:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return s}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let o="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return o?new o:new a}function n(e){return o?o.bind(e):a.bind(e)}function s(){return o?o.snapshot():function(e,...t){return e(...t)}}},5028:(e,t,r)=>{r.d(t,{default:()=>o.a});var a=r(6645),o=r.n(a)},5744:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=r(7828)},6577:(e,t,r)=>{r.d(t,{A:()=>u});var a=r(5155),o=r(2115),l=r(5028),n=r(2577),s=r(1154),i=r(9509);let c=(0,l.default)(()=>Promise.all([r.e(840),r.e(134),r.e(133)]).then(r.bind(r,1514)),{loadableGenerated:{webpack:()=>[1514]},ssr:!1});function u(){let[e,t]=(0,o.useState)([]),[r,l]=(0,o.useState)({}),[u,d]=(0,o.useState)(!0),[f,p]=(0,o.useState)(null),{selectedWells:g,selectedIntervals:h,plotType:y,plotFigure:m,selectedFilePath:b}=(0,n.M)();return((0,o.useEffect)(()=>{if(m&&m.data&&m.data.length>0){console.log("Using plot data from dashboard context:",m),t(m.data),l(m.layout||{}),d(!1);return}if(0===g.length&&!("get-module1-plot"===y&&b)){d(!1),t([]),l({title:{text:0===g.length?"Please select a CSV file from the directory browser to view well log plots.":"Plot data will appear here when you select a CSV file or choose a processing module."}});return}(async()=>{d(!0),p(null);let e=i.env.NEXT_PUBLIC_API_URL;if(!e){p("API URL is not configured."),d(!1);return}let r="";switch(y){case"normalization":r="/api/get-normalization-plot";break;case"smoothing":r="/api/get-smoothing-plot";break;case"splicing":r="/api/get-splicing-plot";break;case"porosity":r="/api/get-porosity-plot";break;case"gsa":r="/api/get-gsa-plot";break;case"vsh":r="/api/get-vsh-plot";break;case"sw":r="/api/get-sw-plot";break;case"rwa":r="/api/get-rwa-plot";break;case"module2":r="/api/get-module2-plot";break;case"rpbe-rgbe":r="/api/get-rgbe-rpbe-plot";break;case"iqual":r="/api/get-iqual";break;case"swgrad":r="/api/get-swgrad-plot";break;case"dns-dnsv":r="/api/get-dns-dnsv-plot";break;case"rt-ro":r="/api/get-rt-r0-plot";break;case"get-module1-plot":r="/api/get-module1-plot";break;default:r="/api/get-plot"}let a="".concat(e).concat(r);try{let e,r;if("get-module1-plot"===y){if(!b){p("No file selected for Module1 plot."),d(!1);return}e={file_path:b}}else e={selected_wells:g,selected_intervals:h};let o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok){let e=await o.json();throw Error(e.error||"Gagal mengambil data dari server")}let n=await o.json();r="get-module1-plot"===y?"string"==typeof n?JSON.parse(n):n:JSON.parse(n),t(r.data),l(r.layout)}catch(e){p(e instanceof Error?e.message:"Terjadi kesalahan tidak dikenal"),console.error("Error fetching plot data:",e)}finally{d(!1)}})()},[g,h,y,b]),u)?(0,a.jsxs)("div",{className:"flex h-full w-full items-center justify-center",children:[(0,a.jsx)(s.A,{className:"mr-2 h-8 w-8 animate-spin"}),(0,a.jsx)("span",{children:"Loading Plot from Server..."})]}):f?(0,a.jsxs)("p",{style:{color:"red"},children:["Error: ",f]}):(0,a.jsx)("div",{style:{border:"1px solid #ccc",padding:"1rem",background:"white",borderRadius:"8px",height:"100%",width:"100%"},children:(0,a.jsx)(c,{data:e,layout:r,style:{width:"100%",height:"100%"},config:{responsive:!0,displaylogo:!1}})})}},6645:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(8229)._(r(7357));function o(e,t){var r;let o={};"function"==typeof e&&(o.loader=e);let l={...o,...t};return(0,a.default)({...l,modules:null==(r=l.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let a=r(5155),o=r(2115),l=r(2146);function n(e){return{default:e&&"default"in e?e.default:e}}r(255);let s={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},i=function(e){let t={...s,...e},r=(0,o.lazy)(()=>t.loader().then(n)),i=t.loading;function c(e){let n=i?(0,a.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,c=s?o.Suspense:o.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(c,{...s?{fallback:n}:{},children:u})}return c.displayName="LoadableComponent",c}},7828:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,r(4054).createAsyncLocalStorage)()},9946:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(2115);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:u="",children:d,iconNode:f,...p}=e;return(0,a.createElement)("svg",{ref:t,...c,width:o,height:o,stroke:r,strokeWidth:n?24*Number(l)/Number(o):l,className:s("lucide",u),...!d&&!i(p)&&{"aria-hidden":"true"},...p},[...f.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:i,...c}=r;return(0,a.createElement)(u,{ref:l,iconNode:t,className:s("lucide-".concat(o(n(e))),"lucide-".concat(e),i),...c})});return r.displayName=n(e),r}}}]);