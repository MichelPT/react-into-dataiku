"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{495:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(5155),n=a(2115),l=a(5695),s=a(2577),i=a(1154),o=a(9509);let d=()=>{let e=e=>({default:e}),t={RWS:.529,RWT:227,FTEMP:80,RT_SH:2.2,A:1,M:2,N:2,RT:"RT",PHIE:"PHIE",SW:"SW",VSH:"VSH"};return[{id:1,location:"Interval",mode:"In_Out",comment:"Tortuosity constant",unit:"",name:"A",isEnabled:!0},{id:2,location:"Interval",mode:"In_Out",comment:"Cementation Factor",unit:"",name:"M",isEnabled:!0},{id:3,location:"Interval",mode:"In_Out",comment:"Saturation exponent",unit:"",name:"N",isEnabled:!0},{id:4,location:"Interval",mode:"In_Out",comment:"Resistivity of formation water",unit:"OHMM",name:"RWS",isEnabled:!0},{id:5,location:"Interval",mode:"In_Out",comment:"Temperature of RWS value",unit:"DEGC",name:"RWT",isEnabled:!0},{id:6,location:"Interval",mode:"In_Out",comment:"Shale resistivity",unit:"OHMM",name:"RT_SH",isEnabled:!0},{id:7,location:"Log",mode:"Input",comment:"True formation resistivity",unit:"OHMM",name:"RT",isEnabled:!0},{id:8,location:"Log",mode:"Input",comment:"Limited effective porosity",unit:"V/V",name:"PHIE",isEnabled:!0},{id:9,location:"Log",mode:"Input",comment:"Limited volume of shale",unit:"V/V",name:"VSH",isEnabled:!0},{id:10,location:"Log",mode:"Input",comment:"Formation temperature",unit:"DEGF",name:"FTEMP",isEnabled:!0},{id:11,location:"Log",mode:"Output",comment:"SW from Indonesia",unit:"V/V",name:"SW",isEnabled:!0}].map(a=>({...a,values:e(t[a.name]||"")}))};function c(){let{selectedIntervals:e,selectedWells:t,wellColumns:a}=(0,s.M)(),c=(0,l.useRouter)(),[m,u]=(0,n.useState)([]),[b,p]=(0,n.useState)(!1),[x,h]=(0,n.useState)({});(0,n.useEffect)(()=>{u(d())},[]);let g=t.flatMap(e=>a[e]||[]),f=(e,t,a)=>{u(r=>r.map(r=>{if(r.id!==e)return r;if(x[e]){let e=Object.fromEntries(Object.keys(r.values).map(e=>[e,a]));return{...r,values:e}}return{...r,values:{...r.values,[t]:a}}}))},y=(e,t)=>{h(a=>({...a,[e]:t}))},v=async a=>{a.preventDefault(),p(!0);let r=m.filter(e=>e.isEnabled).reduce((t,a)=>{let r=a.values[e[0]||"default"]||a.values[Object.keys(a.values)[0]];return t[a.name]=isNaN(Number(r))?r:Number(r),t},{}),n=o.env.NEXT_PUBLIC_API_URL;try{let a=await fetch("".concat(n,"/api/run-sw-calculation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:r,selected_wells:t,selected_intervals:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Server error")}let l=await a.json();alert(l.message||"Proses kalkulasi SW berhasil!"),c.push("/dashboard")}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{p(!1)}},w=(e,t)=>{switch(e){case"Parameter":return"bg-orange-600";case"Constant":if("Input"===t)return"bg-yellow-300";return"bg-yellow-100";case"Log":if("Input"===t)return"bg-cyan-400";return"bg-cyan-200";case"Output":return"bg-yellow-600";case"Interval":return"bg-green-400";default:return"bg-white"}};return(0,r.jsxs)("div",{className:"p-4 md:p-6 h-full flex flex-col bg-white rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800 flex-shrink-0",children:"Water Saturation Input Parameters"}),(0,r.jsxs)("form",{onSubmit:v,className:"flex-grow flex flex-col min-h-0",children:[(0,r.jsxs)("div",{className:"flex-shrink-0 mb-6 p-4 border rounded-lg bg-gray-50 flex flex-col gap-4",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-x-6 gap-y-4 items-start",children:(0,r.jsx)("div",{className:"md:col-span-4",children:(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Well: ",t+", "," / Intervals: ",e.length," selected"]})})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:()=>c.back(),className:"px-6 py-2 rounded-md text-gray-800 bg-gray-200 hover:bg-gray-300 font-semibold",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 rounded-md text-white font-semibold bg-blue-600 hover:bg-blue-700",disabled:b,children:b?(0,r.jsx)(i.A,{className:"animate-spin"}):"Start"})]})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 flex-shrink-0",children:"Parameters"}),(0,r.jsx)("div",{className:"flex-grow min-h-0 border border-gray-300 rounded-lg",children:(0,r.jsx)("div",{className:"overflow-auto h-full",children:(0,r.jsxs)("table",{className:"min-w-full text-sm table-auto",children:[(0,r.jsx)("thead",{className:"bg-gray-200 sticky top-0 z-10",children:(0,r.jsxs)("tr",{children:[["#","Location","Mode","Comment","Unit","Name","P"].map(e=>(0,r.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-b border-r border-gray-300 whitespace-nowrap",children:e},e)),e.map(e=>(0,r.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-b border-r border-gray-300 whitespace-nowrap",children:e},e))]})}),(0,r.jsx)("tbody",{className:"bg-white",children:m.map(t=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 ".concat(t.isEnabled?w(t.location,t.mode):"bg-gray-100 text-gray-400"),children:[(0,r.jsx)("td",{className:"px-3 py-2 border-r text-center",children:t.id}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap",children:t.location}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap",children:t.mode}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-normal max-w-xs",children:t.comment}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap",children:t.unit}),(0,r.jsx)("td",{className:"px-3 py-2 border-r font-semibold whitespace-nowrap",children:t.name}),(0,r.jsx)("td",{className:"px-3 py-2 border-r text-center",children:(0,r.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-400",checked:!!x[t.id],onChange:e=>y(t.id,e.target.checked)})}),e.map(e=>{var a,n,l,s;return(0,r.jsx)("td",{className:"px-3 py-2 border-r bg-white text-black",children:"OPT_GR"===t.name?(0,r.jsx)("select",{value:String(null!=(n=null!=(a=t.values[e])?a:t.values.default)?n:""),onChange:a=>f(t.id,e,a.target.value),className:"w-full min-w-[100px] p-1 bg-white disabled:bg-gray-100 disabled:text-gray-500",children:(0,r.jsx)("option",{value:"LINEAR",children:"LINEAR"})}):"GR"===t.name?(()=>{var a,n;let l=g.filter(e=>e.toUpperCase().includes("GR"));return(0,r.jsxs)("select",{value:String(null!=(n=null!=(a=t.values[e])?a:t.values.default)?n:""),onChange:a=>f(t.id,e,a.target.value),className:"w-full min-w-[100px] p-1 bg-white disabled:bg-gray-100 disabled:text-gray-500",children:[0===l.length&&(0,r.jsx)("option",{value:"",children:"No match"}),l.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})})():(0,r.jsx)("input",{type:"text",value:null!=(s=null!=(l=t.values[e])?l:t.values.default)?s:"",onChange:a=>f(t.id,e,a.target.value),className:"w-full min-w-[100px] p-1 bg-white text-black disabled:bg-gray-100 disabled:text-gray-500"})},"".concat(t.id,"-").concat(e))})]},t.id))})]})})})]})]})}}}]);