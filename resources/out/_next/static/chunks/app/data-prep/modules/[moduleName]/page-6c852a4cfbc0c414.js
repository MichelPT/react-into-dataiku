(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434,645],{255:(e,t,a)=>{"use strict";function r(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}}),a(5155),a(7650),a(5744),a(589)},1154:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1243:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2146:(e,t,a)=>{"use strict";function r(e){let{reason:t,children:a}=e;return a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),a(5262)},3910:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(5155);a(2115);var n=a(1243),l=a(4618),s=a(688),o=a(6434);let i=e=>{let{moduleName:t,validModules:a}=e;if(!a.includes(t))return(0,r.jsx)("div",{className:"h-full p-4 md:p-6 bg-gray-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-red-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)(n.A,{className:"w-6 h-6 text-red-500"}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-red-700",children:"Module Not Found"})]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:['The data preparation module "',t,'" could not be found.']}),(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-800 mb-2",children:"Available modules:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:a.map(e=>(0,r.jsx)("li",{children:e},e))})]})]})});switch(t){case"histogram":return(0,r.jsx)(l.A,{});case"crossplot":return(0,r.jsx)(s.A,{});case"normalization":return(0,r.jsx)(o.default,{});default:return(0,r.jsx)("div",{className:"h-full p-4 md:p-6 bg-gray-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:t.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),(0,r.jsx)("p",{className:"text-gray-600",children:"This data preparation module is under development."})]})})}}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return o}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let n="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return n?new n:new r}function s(e){return n?n.bind(e):r.bind(e)}function o(){return n?n.snapshot():function(e,...t){return e(...t)}}},5028:(e,t,a)=>{"use strict";a.d(t,{default:()=>n.a});var r=a(6645),n=a.n(r)},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},5744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=a(7828)},6434:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),n=a(2115),l=a(2577),s=a(1154),o=a(5695),i=a(9509);let d=e=>{let t=t=>Object.fromEntries(e.map(e=>[e,t])),a=new Set(["NORMALIZE_OPT","LOG_IN","LOG_OUT","LOW_REF","HIGH_REF","LOW_IN","HIGH_IN"]),r={NORMALIZE_OPT:"MIN-MAX",LOG_IN:"GR",LOW_REF:40,HIGH_REF:140,LOW_IN:5,HIGH_IN:95};return r.LOG_OUT="".concat(r.LOG_IN,"_NO"),[{id:1,location:"Parameter",mode:"Input",comment:"Normalization: Min-Max",unit:"ALPHA*15",name:"NORMALIZE_OPT",isEnabled:!0},{id:2,location:"Constant",mode:"Input",comment:"Input low log value",unit:"",name:"LOW_IN",isEnabled:!0},{id:3,location:"Constant",mode:"Input",comment:"Input high log value",unit:"",name:"HIGH_IN",isEnabled:!0},{id:4,location:"Constant",mode:"Input",comment:"Reference log low value",unit:"",name:"LOW_REF",isEnabled:!0},{id:5,location:"Constant",mode:"Input",comment:"Reference log high value",unit:"",name:"HIGH_REF",isEnabled:!0},{id:6,location:"Log",mode:"Input",comment:"Input Log",unit:"LOG_IN",isEnabled:!0,name:"LOG_IN"},{id:7,location:"Log",mode:"Output",comment:"Output Log Name",unit:"LOG_OUT",name:"LOG_OUT",isEnabled:!0}].filter(e=>a.has(e.name)).map(e=>({...e,values:t(r[e.name]||"")}))};function c(){var e;let{selectedWells:t,selectedIntervals:a}=(0,l.M)(),[c,u]=(0,n.useState)([]),m=(0,o.useRouter)(),[p,b]=(0,n.useState)(!1),[h,f]=(0,n.useState)({}),[g,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a.length>0&&u(d(a))},[a]),(0,n.useEffect)(()=>{let e=async e=>{if(0===t.length||!e)return;x(!0);let r=i.env.NEXT_PUBLIC_API_URL;try{let n=await fetch("".concat(r,"/api/get-log-percentiles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selected_wells:t,selected_intervals:a,log_column:e})});if(!n.ok)return void console.error("Gagal mengambil nilai persentil default dari backend.");let l=await n.json();u(e=>e.map(e=>{let t={...e.values};return Object.keys(t).forEach(a=>{"LOW_IN"===e.name&&(t[a]=l.p5),"HIGH_IN"===e.name&&(t[a]=l.p95)}),{...e,values:t}}))}catch(e){console.error("Error saat fetching percentiles:",e)}finally{x(!1)}},r=c.find(e=>"LOG_IN"===e.name),n=a[0],l=n?null==r?void 0:r.values[n]:void 0;l&&e(l)},[t,a,null==(e=c.find(e=>"LOG_IN"===e.name))?void 0:e.values[a[0]||""]]);let y=(e,t,a)=>{u(r=>r.map(r=>{if(r.id!==e)return r;if(h[e]){let e=Object.fromEntries(Object.keys(r.values).map(e=>[e,t]));return{...r,values:e}}return{...r,values:{...r.values,[a]:t}}}))},j=(e,t)=>{f(a=>({...a,[e]:t}))},N=async e=>{e.preventDefault(),b(!0);let r={params:c.filter(e=>e.isEnabled).reduce((e,t)=>{let r=a[0]||Object.keys(t.values)[0],n=t.values[r];return e[t.name]=n,e},{}),selected_wells:t,selected_intervals:a};console.log("Payload yang dikirim ke backend:",r);let n=i.env.NEXT_PUBLIC_API_URL;try{let e=await fetch("".concat(n,"/api/run-interval-normalization"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){let t=await e.json();throw Error(t.error||"Server error")}let t=await e.json();console.log("Data yang sudah dinormalisasi diterima:",JSON.parse(t.data)),alert(t.message+" Hasilnya ada di console (F12)."),m.push("/dashboard")}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{b(!1)}},v=(e,t)=>{switch(e){case"Parameter":return"bg-orange-600";case"Constant":return"Input"===t?"bg-yellow-300":"bg-yellow-100";case"Log":return"Input"===t?"bg-cyan-400":"bg-cyan-200";case"Output":return"bg-yellow-600";case"Interval":return"bg-green-400";default:return"bg-white"}};return(0,r.jsxs)("div",{className:"p-4 md:p-6 h-full flex flex-col bg-white rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-800 flex-shrink-0",children:"Normalize a log based on calibration parameters."}),(0,r.jsxs)("form",{onSubmit:N,className:"flex-grow flex flex-col min-h-0",children:[(0,r.jsxs)("div",{className:"flex-shrink-0 mb-6 p-4 border rounded-lg bg-gray-50",children:[(0,r.jsx)("div",{className:"md:col-span-4",children:(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Well: ",t.join(", ")||"N/A"," / Intervals: ",a.length," selected"]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:()=>m.back(),className:"px-6 py-2 rounded-md text-gray-800 bg-gray-200 hover:bg-gray-300 font-semibold",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 rounded-md text-white font-semibold bg-blue-600 hover:bg-blue-700 flex items-center justify-center",disabled:p||g,children:p||g?(0,r.jsx)(s.A,{className:"animate-spin"}):"Start"})]})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2 flex-shrink-0",children:"Parameters"}),(0,r.jsx)("div",{className:"flex-grow min-h-0 border border-gray-300 rounded-lg",children:(0,r.jsx)("div",{className:"overflow-auto h-full",children:(0,r.jsxs)("table",{className:"min-w-full text-sm table-auto",children:[(0,r.jsx)("thead",{className:"bg-gray-200 sticky top-0 z-10",children:(0,r.jsxs)("tr",{children:[["Location","Mode","Comment","Unit","Name","P"].map(e=>(0,r.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-b border-r border-gray-300 whitespace-nowrap",children:e},e)),a.map(e=>(0,r.jsx)("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 border-b border-r border-gray-300 whitespace-nowrap",children:e},e))]})}),(0,r.jsx)("tbody",{className:"bg-white",children:c.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 ".concat(e.isEnabled?v(e.location,e.mode):"bg-gray-100 text-gray-400"),children:[(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap text-sm",children:e.location}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap text-sm",children:e.mode}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-normal max-w-xs text-sm",children:e.comment}),(0,r.jsx)("td",{className:"px-3 py-2 border-r whitespace-nowrap text-sm",children:e.unit}),(0,r.jsx)("td",{className:"px-3 py-2 border-r font-semibold whitespace-nowrap text-sm",children:e.name}),(0,r.jsx)("td",{className:"px-3 py-2 border-r text-center",children:(0,r.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-400",checked:!!h[e.id],onChange:t=>j(e.id,t.target.checked)})}),a.map(t=>{var a,n;return(0,r.jsx)("td",{className:"px-3 py-2 border-r bg-white text-black",children:"NORMALIZE_OPT"===e.name?(0,r.jsx)("select",{value:null!=(a=e.values[t])?a:"",onChange:a=>y(e.id,a.target.value,t),className:"w-full p-1 bg-white text-black disabled:bg-gray-100 disabled:text-gray-500",children:(0,r.jsx)("option",{value:"MIN-MAX",children:"MIN-MAX"})}):(0,r.jsx)("input",{type:"text",value:null!=(n=e.values[t])?n:"",onChange:a=>y(e.id,a.target.value,t),className:"w-full min-w-[100px] p-1 bg-white text-black disabled:bg-gray-100 disabled:text-gray-500"})},t)})]},e.id))})]})})})]})]})}},6645:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=a(8229)._(a(7357));function n(e,t){var a;let n={};"function"==typeof e&&(n.loader=e);let l={...n,...t};return(0,r.default)({...l,modules:null==(a=l.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=a(5155),n=a(2115),l=a(2146);function s(e){return{default:e&&"default"in e?e.default:e}}a(255);let o={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},i=function(e){let t={...o,...e},a=(0,n.lazy)(()=>t.loader().then(s)),i=t.loading;function d(e){let s=i?(0,r.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?n.Suspense:n.Fragment,c=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(a,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(a,{...e})});return(0,r.jsx)(d,{...o?{fallback:s}:{},children:c})}return d.displayName="LoadableComponent",d}},7828:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,a(4054).createAsyncLocalStorage)()},8297:(e,t,a)=>{Promise.resolve().then(a.bind(a,3910))}},e=>{var t=t=>e(e.s=t);e.O(0,[9,43,441,684,358],()=>t(8297)),_N_E=e.O()}]);