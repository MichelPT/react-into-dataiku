(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{1154:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1380:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(9946).A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},1614:(e,t,l)=>{Promise.resolve().then(l.bind(l,3117))},3117:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>m});var a=l(5155),s=l(2115),o=l(4213),r=l(1154),c=l(1380),n=l(6474),d=l(3052),i=l(9890),x=l(2577),u=l(9509);function h(){let e="adera",t="benuang",{toggleWellSelection:l,selectedWells:h,setPlotFigure:p,setPlotType:f,setSelectedFilePath:g}=(0,x.M)(),[m,y]=(0,s.useState)(null),[b,j]=(0,s.useState)([]),[v,N]=(0,s.useState)([]),[w,A]=(0,s.useState)([]),[k,_]=(0,s.useState)(!0),[E,F]=(0,s.useState)(!1),[M,P]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{_(!0),P(null);let l=u.env.NEXT_PUBLIC_API_URL;console.log("API URL: ".concat(l)),console.log("Full request URL: ".concat(l,"/api/structure-folders/").concat(e,"/").concat(t));try{let a=await fetch("".concat(l,"/api/structure-folders/").concat(e,"/").concat(t));if(console.log("Response status: ".concat(a.status," ").concat(a.statusText)),!a.ok){let e="Failed to load folders: ".concat(a.status," ").concat(a.statusText);try{let t=await a.text();t&&(e+=" - ".concat(t),console.error("Backend error response:",t))}catch(e){console.error("Could not parse error response:",e)}throw Error(e)}let s=await a.json();console.log("Folders data received:",s);let o=s.folder_names.map(e=>({name:e,type:"folder",file_count:0,path:"".concat(s.structure_path,"/").concat(e)}));j(o)}catch(e){console.error("Error loading well folders:",e),P(e instanceof Error?e.message:"Failed to load folders"),j([])}finally{_(!1)}})()},[]),(0,s.useEffect)(()=>{m?(async()=>{F(!0),P(null);let l=u.env.NEXT_PUBLIC_API_URL;console.log("Loading files for folder: ".concat(m)),console.log("Full request URL: ".concat(l,"/api/well-folder-files/").concat(e,"/").concat(t,"/").concat(m));try{let a=await fetch("".concat(l,"/api/well-folder-files/").concat(e,"/").concat(t,"/").concat(m));if(console.log("Files response status: ".concat(a.status," ").concat(a.statusText)),!a.ok){let e="Failed to load files: ".concat(a.status," ").concat(a.statusText);try{let t=await a.text();t&&(e+=" - ".concat(t),console.error("Backend error response:",t))}catch(e){console.error("Could not parse error response:",e)}throw Error(e)}let s=await a.json();console.log("Files data received:",s),N(s.csv_files_details)}catch(e){console.error("Error loading files:",e),P(e instanceof Error?e.message:"Failed to load files"),N([])}finally{F(!1)}})():N([])},[m]);let C=e=>{m===e?y(null):y(e),A([])},L=async e=>{let t=e.path,a=w.includes(t)?w.filter(e=>e!==t):[t];if(A(a),a.length>0&&".csv"===e.extension){let a=e.name.replace(/\.[^/.]+$/,"");f("get-module1-plot"),g(t),h.includes(a)||l(a);try{let l;console.log("Requesting Module1 plot for CSV file: ".concat(t)),console.log("Well name: ".concat(a,", File: ").concat(e.name)),console.log("File path for backend: ".concat(t));let s=u.env.NEXT_PUBLIC_API_URL,o="".concat(s,"/api/get-module1-plot");console.log("Full Module1 plot URL: ".concat(o));let r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:t})});if(console.log("Module1 plot response status: ".concat(r.status," ").concat(r.statusText)),!r.ok){let e="Failed to get Module1 plot: ".concat(r.status," ").concat(r.statusText);try{let t=await r.text();t&&(e+=" - ".concat(t),console.error("Module1 plot error response:",t))}catch(e){console.error("Could not parse Module1 plot error response:",e)}throw Error(e)}let c=await r.json();console.log("Module1 plot data received from backend:",c);try{l="string"==typeof c?JSON.parse(c):c,console.log("Parsed plot data:",l),l&&"object"==typeof l&&(l.data||l.layout)?(console.log("Using parsed plot data:",l),p({data:l.data||[],layout:l.layout||{}}),console.log("Module1 plot data updated in dashboard context")):c&&c.error?(console.error("Module1 plot request failed - backend error:",c.error),P("Plot generation failed: ".concat(c.error))):(console.error("Module1 plot request failed - invalid Plotly figure structure"),P("Plot generation failed: Invalid plot data structure"))}catch(e){console.error("Failed to parse plot data:",e),P("Plot generation failed: Could not parse plot data")}}catch(e){console.error("Error processing Module1 plot:",e),P(e instanceof Error?e.message:"Failed to process plot data")}}else if(0===a.length){let t=e.name.replace(/\.[^/.]+$/,"");h.includes(t)&&l(t)}},S=e=>e<1024?"".concat(e," B"):e<1048576?"".concat((e/1024).toFixed(1)," KB"):"".concat((e/1048576).toFixed(1)," MB");return(0,a.jsxs)("aside",{className:"w-52 bg-gray-100 flex flex-col gap-2 p-2 border-r border-gray-300 h-screen",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-gray-600"}),(0,a.jsx)("div",{className:"text-xs font-bold text-gray-800",children:"Wells Browser"})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:(0,a.jsxs)("div",{className:"text-xs text-blue-700",children:[(0,a.jsx)("div",{className:"font-semibold",children:t}),(0,a.jsxs)("div",{className:"text-blue-500",children:["Field: ",e]})]})}),M&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2",children:[(0,a.jsx)("div",{className:"text-xs text-red-700 font-medium",children:"Error:"}),(0,a.jsx)("div",{className:"text-xs text-red-600",children:M})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-2",children:[(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-700 mb-1",children:"Well Folders"}),(0,a.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:k?(0,a.jsxs)("div",{className:"flex items-center gap-2 p-1",children:[(0,a.jsx)(r.A,{className:"w-3 h-3 animate-spin text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Loading..."})]}):b&&0!==b.length?b.map(e=>(0,a.jsxs)("button",{onClick:()=>C(e.name),className:"w-full flex items-center gap-2 p-1 text-xs rounded transition-colors duration-200 ".concat(m===e.name?"bg-green-100 text-green-800":"hover:bg-gray-100 text-gray-700"),children:[(0,a.jsx)(c.A,{className:"w-3 h-3 text-yellow-500"}),(0,a.jsx)("span",{className:"flex-1 text-left truncate",children:e.name}),m===e.name?(0,a.jsx)(n.A,{className:"w-3 h-3"}):(0,a.jsx)(d.A,{className:"w-3 h-3"})]},e.name)):(0,a.jsx)("div",{className:"text-xs text-gray-500 p-1",children:"No folders found"})})]}),m&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-2 flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("h3",{className:"text-xs font-bold text-gray-700",children:["Files in ",m]}),v&&v.length>0&&(0,a.jsx)("button",{onClick:()=>{w.length===v.length?(A([]),v.forEach(e=>{let t=e.name.replace(/\.[^/.]+$/,"");h.includes(t)&&l(t)})):(A(v.map(e=>e.path)),v.forEach(e=>{let t=e.name.replace(/\.[^/.]+$/,"");h.includes(t)||l(t)}))},className:"text-xs text-blue-600 hover:text-blue-800",children:w.length===v.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"space-y-1 overflow-y-auto flex-1",children:E?(0,a.jsxs)("div",{className:"flex items-center gap-2 p-1",children:[(0,a.jsx)(r.A,{className:"w-3 h-3 animate-spin text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Loading..."})]}):v&&0!==v.length?v.map(e=>{let t=w.includes(e.path);return(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsxs)("button",{onClick:()=>L(e),className:"w-full flex items-center gap-2 p-1 text-xs rounded transition-colors duration-200 ".concat(t?"bg-blue-100 text-blue-800 border border-blue-300":"hover:bg-gray-100 text-gray-700 border border-transparent"),title:e.path,children:[(0,a.jsx)(i.A,{className:"w-3 h-3 flex-shrink-0 ".concat(".csv"===e.extension?"text-blue-500":"text-gray-500")}),(0,a.jsx)("span",{className:"flex-1 text-left truncate",children:e.name})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 ml-5",children:S(e.size_bytes)})]},e.path)}):(0,a.jsx)("div",{className:"text-xs text-gray-500 p-1",children:"No files found"})}),w&&w.length>0&&(0,a.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:[w.length," file",1!==w.length?"s":""," selected"]})})]})]})}var p=l(1713),f=l(2431),g=l(5695);function m(e){let{children:t}=e;return(0,a.jsx)(x.q,{children:(0,a.jsx)(y,{children:t})})}function y(e){let{children:t}=e,l=(0,g.usePathname)().split("/").pop()||null;return(0,a.jsxs)("div",{className:"flex h-[calc(100vh-80px)] w-full bg-gray-100 font-sans text-gray-800",children:[(0,a.jsx)(h,{}),(0,a.jsx)(p.A,{children:t}),(0,a.jsx)(f.A,{activeButton:l})]})}},4213:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(9946).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},9890:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(9946).A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[672,723,441,684,358],()=>t(1614)),_N_E=e.O()}]);